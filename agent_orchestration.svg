<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <defs>
    <linearGradient id="orchestratorGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ff6b6b"/>
      <stop offset="100%" style="stop-color:#ee5a5a"/>
    </linearGradient>
    <linearGradient id="agentGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4ecdc4"/>
      <stop offset="100%" style="stop-color:#44a08d"/>
    </linearGradient>
    <linearGradient id="arrowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="4" flood-opacity="0.2"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#667eea"/>
    </marker>
    <marker id="arrowheadReturn" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="700" fill="#0f172a"/>
  
  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" fill="#f1f5f9" font-family="system-ui, sans-serif" font-size="24" font-weight="bold">Agent Orchestration Flow</text>
  <text x="450" y="65" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="14">Electrolyte Design Multi-Agent System</text>
  
  <!-- User Query Input -->
  <rect x="370" y="90" width="160" height="40" rx="8" fill="#1e293b" stroke="#334155" stroke-width="2" filter="url(#shadow)"/>
  <text x="450" y="116" text-anchor="middle" fill="#f1f5f9" font-family="system-ui, sans-serif" font-size="13" font-weight="500">ğŸ‘¤ User Query</text>
  
  <!-- Arrow from User to Orchestrator -->
  <line x1="450" y1="130" x2="450" y2="160" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Orchestrator Agent (Center) -->
  <rect x="300" y="165" width="300" height="80" rx="12" fill="url(#orchestratorGrad)" filter="url(#shadow)"/>
  <text x="450" y="200" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="16" font-weight="bold">ğŸ¯ OrchestratorAgent</text>
  <text x="450" y="225" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-family="system-ui, sans-serif" font-size="11">Coordinates workflow â€¢ Routes queries â€¢ Aggregates results</text>
  
  <!-- Step Labels -->
  <rect x="50" y="280" width="80" height="30" rx="15" fill="#334155"/>
  <text x="90" y="300" text-anchor="middle" fill="#f1f5f9" font-family="system-ui, sans-serif" font-size="12" font-weight="600">Step 1</text>
  
  <rect x="50" y="370" width="80" height="30" rx="15" fill="#334155"/>
  <text x="90" y="390" text-anchor="middle" fill="#f1f5f9" font-family="system-ui, sans-serif" font-size="12" font-weight="600">Step 2</text>
  
  <rect x="50" y="460" width="80" height="30" rx="15" fill="#334155"/>
  <text x="90" y="480" text-anchor="middle" fill="#f1f5f9" font-family="system-ui, sans-serif" font-size="12" font-weight="600">Step 3</text>
  
  <rect x="50" y="550" width="80" height="30" rx="15" fill="#334155"/>
  <text x="90" y="570" text-anchor="middle" fill="#f1f5f9" font-family="system-ui, sans-serif" font-size="12" font-weight="600">Step 4</text>
  
  <!-- Agent 1: Literature RAG -->
  <rect x="150" y="270" width="250" height="50" rx="10" fill="url(#agentGrad)" filter="url(#shadow)"/>
  <text x="275" y="295" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="13" font-weight="600">ğŸ“š LiteratureRAGAgent</text>
  <text x="275" y="310" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="system-ui, sans-serif" font-size="10">Vector store + Knowledge base search</text>
  
  <!-- Agent 2: Property Compatibility -->
  <rect x="150" y="360" width="250" height="50" rx="10" fill="url(#agentGrad)" filter="url(#shadow)"/>
  <text x="275" y="385" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="13" font-weight="600">âš—ï¸ PropertyCompatibilityAgent</text>
  <text x="275" y="400" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="system-ui, sans-serif" font-size="10">Component analysis + Issue detection</text>
  
  <!-- Agent 3: Experiment Planning -->
  <rect x="150" y="450" width="250" height="50" rx="10" fill="url(#agentGrad)" filter="url(#shadow)"/>
  <text x="275" y="475" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="13" font-weight="600">ğŸ“‹ ExperimentPlanningAgent</text>
  <text x="275" y="490" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="system-ui, sans-serif" font-size="10">Creates 3 formulations</text>
  
  <!-- Agent 4: Performance Prediction -->
  <rect x="150" y="540" width="250" height="50" rx="10" fill="url(#agentGrad)" filter="url(#shadow)"/>
  <text x="275" y="565" text-anchor="middle" fill="white" font-family="system-ui, sans-serif" font-size="13" font-weight="600">ğŸ“ˆ PerformancePredictionAgent</text>
  <text x="275" y="580" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="system-ui, sans-serif" font-size="10">Evaluates each formulation</text>
  
  <!-- Communication arrows from Orchestrator to Agents (CALL) -->
  <path d="M 350 245 L 350 270" stroke="#667eea" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 350 320 L 350 360" stroke="#667eea" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 350 410 L 350 450" stroke="#667eea" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 350 500 L 350 540" stroke="#667eea" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Data boxes on right side -->
  <rect x="500" y="270" width="200" height="50" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="600" y="290" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">INPUT: {query}</text>
  <text x="600" y="308" text-anchor="middle" fill="#10b981" font-family="system-ui, sans-serif" font-size="10" font-weight="500">OUTPUT: literature_result</text>
  
  <rect x="500" y="360" width="200" height="50" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="600" y="380" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">INPUT: {components, conditions}</text>
  <text x="600" y="398" text-anchor="middle" fill="#10b981" font-family="system-ui, sans-serif" font-size="10" font-weight="500">OUTPUT: property_result</text>
  
  <rect x="500" y="450" width="200" height="50" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="600" y="470" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">INPUT: {query, lit_data, prop_data}</text>
  <text x="600" y="488" text-anchor="middle" fill="#10b981" font-family="system-ui, sans-serif" font-size="10" font-weight="500">OUTPUT: 3 formulations</text>
  
  <rect x="500" y="540" width="200" height="50" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="600" y="560" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">INPUT: {formulation_dict} Ã— 3</text>
  <text x="600" y="578" text-anchor="middle" fill="#10b981" font-family="system-ui, sans-serif" font-size="10" font-weight="500">OUTPUT: predictions for each</text>
  
  <!-- Arrows to data boxes -->
  <line x1="400" y1="295" x2="500" y2="295" stroke="#667eea" stroke-width="1.5" stroke-dasharray="4"/>
  <line x1="400" y1="385" x2="500" y2="385" stroke="#667eea" stroke-width="1.5" stroke-dasharray="4"/>
  <line x1="400" y1="475" x2="500" y2="475" stroke="#667eea" stroke-width="1.5" stroke-dasharray="4"/>
  <line x1="400" y1="565" x2="500" y2="565" stroke="#667eea" stroke-width="1.5" stroke-dasharray="4"/>
  
  <!-- Return arrows (green) showing data flows back -->
  <path d="M 700 295 Q 750 295 750 340 Q 750 385 700 385" stroke="#10b981" stroke-width="1.5" fill="none" stroke-dasharray="4" marker-end="url(#arrowheadReturn)"/>
  <path d="M 700 385 Q 770 385 770 430 Q 770 475 700 475" stroke="#10b981" stroke-width="1.5" fill="none" stroke-dasharray="4" marker-end="url(#arrowheadReturn)"/>
  <path d="M 700 475 Q 790 475 790 520 Q 790 565 700 565" stroke="#10b981" stroke-width="1.5" fill="none" stroke-dasharray="4" marker-end="url(#arrowheadReturn)"/>
  
  <!-- Data flow labels -->
  <text x="765" y="340" fill="#10b981" font-family="system-ui, sans-serif" font-size="9">passes to</text>
  <text x="785" y="430" fill="#10b981" font-family="system-ui, sans-serif" font-size="9">passes to</text>
  <text x="805" y="520" fill="#10b981" font-family="system-ui, sans-serif" font-size="9">attaches to plans</text>
  
  <!-- Final Output -->
  <rect x="300" y="620" width="300" height="50" rx="10" fill="#1e293b" stroke="#10b981" stroke-width="2" filter="url(#shadow)"/>
  <text x="450" y="645" text-anchor="middle" fill="#f1f5f9" font-family="system-ui, sans-serif" font-size="13" font-weight="600">ğŸ“¦ Final Response</text>
  <text x="450" y="662" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">3 Plans + Predictions + Summary</text>
  
  <!-- Arrow from last agent to output -->
  <line x1="350" y1="590" x2="350" y2="620" stroke="#10b981" stroke-width="2" marker-end="url(#arrowheadReturn)"/>
  
  <!-- Legend -->
  <rect x="720" y="165" width="160" height="80" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="800" y="185" text-anchor="middle" fill="#f1f5f9" font-family="system-ui, sans-serif" font-size="11" font-weight="600">Legend</text>
  <line x1="740" y1="200" x2="770" y2="200" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="780" y="204" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Call agent</text>
  <line x1="740" y1="220" x2="770" y2="220" stroke="#10b981" stroke-width="2" marker-end="url(#arrowheadReturn)"/>
  <text x="780" y="224" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">Return data</text>
  
  <!-- Key insight box -->
  <rect x="720" y="260" width="160" height="55" rx="8" fill="rgba(255,107,107,0.1)" stroke="#ff6b6b" stroke-width="1"/>
  <text x="800" y="280" text-anchor="middle" fill="#ff6b6b" font-family="system-ui, sans-serif" font-size="10" font-weight="600">Hub-and-Spoke Pattern</text>
  <text x="800" y="295" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">All communication goes</text>
  <text x="800" y="307" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">through Orchestrator</text>
</svg>
